# Лабораторная работа №4

### Прецедент «Сделать предварительную ставку»

![Диаграмма](https://github.com/HungryLite/Rtippo/blob/main/images/lab4.drawio.png)

| Действие    | ButtonGameStartClick() |
|:------------|:-|
| Ссылки      | Преценденты: «Сделать предварительную ставку» |
| Предусловия | Поля для ввода имени, баланса и предварительной ставки заполнены |
| Постусловия | Кнопка «Начать» нажата |

| Действие    | Initialize() |
|:------------|:-|
| Ссылки      | Преценденты: «Сделать предварительную ставку» |
| Предусловия | Кнопка «Начать» нажата |
| Постусловия | Создан экзмпляр класса Game |

| Действие    | AddPlayers(mainname, balance) |
|:------------|:-|
| Ссылки      | Преценденты: «Сделать предварительную ставку» |
| Предусловия | Создан экзмпляр класса Game |
| Постусловия | Все Игроки добавились в список игроков |

| Действие    | StartGameLoop() |
|:------------|:-|
| Ссылки      | Преценденты: «Сделать предварительную ставку» |
| Предусловия | Все Игроки добавились в список игроков |
| Постусловия | Игровой процесс начался |

| Действие    | AddMoneyBank(listBox1) |
|:------------|:-|
| Ссылки      | Преценденты: «Сделать предварительную ставку» |
| Предусловия | Игровой процесс начался |
| Постусловия | С баланса Игроков списались деньги |

| Действие    | AddMoney(betAmount) |
|:------------|:-|
| Ссылки      | Преценденты: «Сделать предварительную ставку» |
| Предусловия | С баланса Игроков списались деньги |
| Постусловия | Полученные деньги от Игроков в «пул»-банке |

| Действие    | "Банк: " + Convert.ToString(Game.Instance.Bank.TotalMoney) |
|:------------|:-|
| Ссылки      | Преценденты: «Сделать предварительную ставку» |
| Предусловия | Полученные деньги от Игроков в «пул»-банке |
| Постусловия | В сводку игры добавилась информация о сумме в «пул»-банке |

| Действие    | MessageBox.Show("Ошибка ввода данных для Игроков") |
|:------------|:-|
| Ссылки      | Преценденты: «Сделать предварительную ставку» |
| Предусловия | Размер предварительной ставки введен не корректно |
| Постусловия | Полученно сообщение об ошибке|
***

### Прецедент «Раздать карты»

![Диаграмма](https://github.com/HungryLite/Rtippo/blob/main/images/lab4(2).drawio.png)

| Действие    | ButtonGameStartClick() |
|:------------|:-|
| Ссылки      | Преценденты: «Раздать карты» |
| Предусловия | Прецедент «Сделать предварительную ставку» закончился |
| Постусловия | Прецедент «Раздать карты» начался |

| Действие    | RandomDealerIndex() |
|:------------|:-|
| Ссылки      | Преценденты: «Раздать карты» |
| Предусловия | Прецедент «Раздать карты» начался |
| Постусловия | Сдающий определен |

| Действие    | DistributionPlayerCard() |
|:------------|:-|
| Ссылки      | Преценденты: «Раздать карты» |
| Предусловия | Сдающий определен |
| Постусловия | Процесс создания колоды карт начался |

| Действие    | InitializeDeck() |
|:------------|:-|
| Ссылки      | Преценденты: «Раздать карты» |
| Предусловия | Процесс создания колоды карт начался |
| Постусловия | Колода карт создана |

| Действие    | Shuffle() |
|:------------|:-|
| Ссылки      | Преценденты: «Раздать карты» |
| Предусловия | Колода карт создана |
| Постусловия | Колода карт перетасована |

| Действие    | DealCard() |
|:------------|:-|
| Ссылки      | Преценденты: «Раздать карты» |
| Предусловия | Колода карт перетасована |
| Постусловия | Каждый Игрок получил две карты |
***

### Прецедент «Принять решение о ставке»

![Диаграмма](https://github.com/HungryLite/Rtippo/blob/main/images/lab4(3).drawio.png)

| Действие    | ButtonGameStartClick() |
|:------------|:-|
| Ссылки      | Преценденты: «Принять решение о ставке» |
| Предусловия | Прецедент «Раздать карты» закончился |
| Постусловия | Прецедент «Принять решение о ставке» начался |

| Действие    | CheckPlayers(labelinfo, listBox1) |
|:------------|:-|
| Ссылки      | Преценденты: «Принять решение о ставке» |
| Предусловия | У Игрока(ов) не хватает баланса на предарительную ставку |
| Постусловия | Игрок(и) выбывает(ют) из игры |

| Действие    | DealerNewIndex(listBox1) |
|:------------|:-|
| Ссылки      | Преценденты: «Принять решение о ставке» |
| Предусловия | Раунд закончился |
| Постусловия | Новый сдающий определен для следующего раунда |

| Действие    | PlayerNewIndex() |
|:------------|:-|
| Ссылки      | Преценденты: «Принять решение о ставке» |
| Предусловия | Сдающий для раунда определен |
| Постусловия | Определен Игрок, который начнет делать ход первым |

| Действие    | BotMove(labelCardInfoThree, listBox1, imageList1, labelinfo) |
|:------------|:-|
| Ссылки      | Преценденты: «Принять решение о ставке» |
| Предусловия | Игрок должен быть Ботом(Индекс у Игрока который совершает ход не должен быть равен 0) |
| Постусловия | Боту предоставлен ход |

| Действие    | GetRandomBool() |
|:------------|:-|
| Ссылки      | Преценденты: «Принять решение о ставке» |
| Предусловия | Боту предоставлен ход |
| Постусловия | Полученно решение о ходе для Бота |

| Действие    | GetRandomBetAmount(playerMoney, bet, bank) |
|:------------|:-|
| Ссылки      | Преценденты: «Принять решение о ставке» |
| Предусловия | Бот решил сделать ставку |
| Постусловия | Полученна сумма для ставки |

| Действие    | DealCard() |
|:------------|:-|
| Ссылки      | Преценденты: «Принять решение о ставке» |
| Предусловия | Полученна сумма для ставки |
| Постусловия | Игрок получил третью карту |

| Действие    | CalculateWinnings(playerCards, bet) |
|:------------|:-|
| Ссылки      | Преценденты: «Принять решение о ставке» |
| Предусловия | Игрок получил третью карту |
| Постусловия | Получен результат ставки |

| Действие    | AddMoney(-win) |
|:------------|:-|
| Ссылки      | Преценденты: «Принять решение о ставке» |
| Предусловия | Получен результат ставки |
| Постусловия | Либо Игрок получает выигрыш и «пул»-банк теряет деньги(в размере выигрыша), либо Игрок теряет деньги и «пул»-банк получает деньги |

| Действие    | PlayerMove(labelCardInfoThree, listBox1, imageList1) |
|:------------|:-|
| Ссылки      | Преценденты: «Принять решение о ставке» |
| Предусловия | Игрок должен быть под управлением Человека(Индекс у Игрока который совершает ход должен быть равен 0) |
| Постусловия | Игроку предоставлен ход |

| Действие    | ButtonPlaceBetClick() |
|:------------|:-|
| Ссылки      | Преценденты: «Принять решение о ставке» |
| Предусловия | Игрок ввел размер ставки |
| Постусловия | Игрок отправил размер ставки |

| Действие    | MessageBox.Show("Вы выиграли") |
|:------------|:-|
| Ссылки      | Преценденты: «Принять решение о ставке» |
| Предусловия | Ставка выиграла |
| Постусловия | Полученно сообщение |

| Действие    | MessageBox.Show("Ставка не выиграла") |
|:------------|:-|
| Ссылки      | Преценденты: «Принять решение о ставке» |
| Предусловия | Ставка не выиграла |
| Постусловия | Полученно сообщение |
***

### Прецедент «Разделить «пул»-банк»

![Диаграмма](https://github.com/HungryLite/Rtippo/blob/main/images/lab4(4).drawio.png)

| Действие    | ButtonPlaceBetClick() |
|:------------|:-|
| Ссылки      | Преценденты: «Разделить «пул»-банк» |
| Предусловия | Игроку предоставлен ход |
| Постусловия | Раунд закончился(Если Игрок был последним кто получил ход) |

| Действие    | PoolBank(labelinfo, listBox1) |
|:------------|:-|
| Ссылки      | Преценденты: «Разделить «пул»-банк» |
| Предусловия | В «пул»-банке накопилась необходимая сумма |
| Постусловия | Деньги распределились между Игроками |

| Действие    | RemoveMoney(totalBankMoney) |
|:------------|:-|
| Ссылки      | Преценденты: «Разделить «пул»-банк» |
| Предусловия | Деньги распределились между Игроками |
| Постусловия | Деньги списались с «пул»-банка |

| Действие    | "Доля игроков: " + betPerPlayer |
|:------------|:-|
| Ссылки      | Преценденты: «Разделить «пул»-банк» |
| Предусловия | Деньги списались с «пул»-банка |
| Постусловия | В сводке игры отобразилась информация о доле каждого Игрока |

| Действие    | ButtonRefuseBetClick() |
|:------------|:-|
| Ссылки      | Преценденты: «Разделить «пул»-банк» |
| Предусловия | Игроку предоставлен ход |
| Постусловия | Раунд закончился(Если Игрок был последним кто получил ход) |
